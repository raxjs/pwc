---
sidebar_position: 1
---

# ä»€ä¹ˆæ˜¯ PWC ï¼Ÿ

PWC æ˜¯ä¸€ä¸ªæ¸è¿›å¼å¢å¼ºçš„ Web Component UI æ¡†æ¶ã€‚åœ¨å·²æœ‰ Web Component ç”¨æ³•åŸºç¡€ä¸Šï¼ŒPWC æä¾›äº† [MVVM çš„æ•°æ®è§†å›¾ç»‘å®šèƒ½åŠ›](https://zh.wikipedia.org/wiki/MVVM)ï¼ŒåŒæ—¶ç”±äºè½»é‡çš„è¿è¡Œæ—¶ä»£ç å’Œ Web Component æœ¬èº«æä¾›çš„ç»„ä»¶åŒ–èƒ½åŠ›ï¼Œå¯ä»¥åœ¨å¸®åŠ©å¼€å‘è€…æé«˜å¼€å‘ç»„ä»¶æ•ˆç‡çš„åŸºç¡€ä¸Šï¼Œè¾¾åˆ°ç»„ä»¶é«˜æ€§èƒ½ã€è½»é‡åŒ–ç­‰ç‰¹ç‚¹ã€‚

## ä¸ºä»€ä¹ˆé€‰æ‹© PWC ï¼ŸğŸ•µ

è°ˆåˆ° UI Frameworkï¼Œå¼€å‘è€…å¾€å¾€ä¼šæƒ³åˆ° React/Vue/Angular ç­‰ç­‰ç¤¾åŒºä¼˜ç§€çš„äº§å“ã€‚ä½†æ˜¯ï¼ŒPWC å¯ä»¥æä¾›ä¸å®ƒä»¬å®Œå…¨ä¸åŒçš„å¼€å‘ä½“éªŒï¼Œå€ŸåŠ©æµè§ˆå™¨åŸç”Ÿçš„ç»„ä»¶åŒ–èƒ½åŠ›ï¼Œä»¥åŠå®ç°ä¸Šç›´æ¥æ‹“å±• `HTMLElement` ç­‰åŸç”ŸåŸºç±»ï¼Œåœ¨ä¸å½±å“ Web Component ç°æœ‰èƒ½åŠ›çš„å‰æä¸‹ï¼Œè®©å®ƒä»¬è·å¾—å¢å¼ºã€‚

- **å¯¹ä¸­ä½ç«¯æœºï¼ˆæˆ–åµŒå…¥å¼è®¾å¤‡ï¼‰æ€§èƒ½æœ‰è¦æ±‚**ã€‚å¾—ç›Šäºæµè§ˆå™¨åŸç”Ÿçš„ç»„ä»¶èƒ½åŠ›ä»¥åŠ MVVM çš„æ¶æ„è®¾è®¡ï¼ŒPWC åœ¨è¿è¡Œæ—¶**ä¸å­˜åœ¨ VDOM**ï¼Œè¿›è€Œå¯ä»¥å¤§å¹…å‡å°‘ç»„ä»¶çŠ¶æ€å˜åŒ–æ—¶çš„å¤æ‚è®¡ç®—ä»¥åŠç®€åŒ–æ›´æ–°é€»è¾‘ï¼Œä»è€Œå®ç°**ä½å†…å­˜å ç”¨ã€é«˜æ€§èƒ½**çš„ç‰¹ç‚¹ï¼Œåœ¨ä¸­ä½ç«¯è®¾å¤‡ä¸Š PWC ä¼šæœ‰æ›´åŠ çªå‡ºçš„è¡¨ç°
- **å¸Œæœ›æå‡é¦–å±æ¸²æŸ“é€Ÿåº¦ï¼Œä¸”å¯¹æ¥å…¥ SSR æ²¡æœ‰å¼ºè¯‰æ±‚**ã€‚å½“æˆ‘ä»¬æåˆ°ä¼˜åŒ–é¦–å±æ¸²æŸ“æ—¶é—´ï¼Œå¾€å¾€ä¼šæƒ³åˆ° Server Side Renderï¼Œé€šè¿‡äº‘ç«¯ç›´å‡º HTML ç»“æ„æ¥è¾¾åˆ°ç›®çš„ã€‚SSR åŒæ ·ä¼šå¼•å…¥å¤æ‚çš„æ¥å…¥æµç¨‹ï¼Œä»¥åŠè¾ƒé«˜çš„ä½¿ç”¨æˆæœ¬ã€‚è¿™ä¸ªæ—¶å€™ï¼ŒPWC å¯èƒ½æ˜¯å¦ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚PWC ç®€å•çš„æ¸²æŸ“æµç¨‹ï¼Œä»¥åŠè½»é‡çš„è¿è¡Œæ—¶ï¼Œå¯ä»¥è®©çº¯å®¢æˆ·ç«¯æ¸²æŸ“çš„æ—¶é—´å¤§å¤§å‡å°‘
- **è®©å¼€å‘çš„ç‰©æ–™ä¸å†è¢«æ¡†æ¶å‡çº§æ‰€å›°æ‰°**ã€‚å½“ä¸šåŠ¡åˆ°è¾¾ä¸€å®šé‡çº§åï¼Œä¼šæœ‰æ²‰æ·€ä¸šåŠ¡åŸŸç‰©æ–™çš„è¯‰æ±‚ï¼Œè¿™äº›ç‰©æ–™ä¼šè¢«åº”ç”¨å¹¿æ³›ä¾èµ–ã€‚å¹¶ä¸”å½“åŠŸèƒ½è¿­ä»£ç¨³å®šä¹‹åï¼Œé•¿æ—¶é—´å†…ä¸ä¼šæœ‰æ–°çš„å˜æ›´ã€‚ç¤¾åŒºå†…å¤§éƒ¨åˆ†çš„ UI Framework éƒ½å­˜åœ¨ break change çš„æ¼”è¿›ï¼Œè¿™äº›æ¼”è¿›å°†ä¼šå¯¼è‡´å­˜é‡ç‰©æ–™å­˜åœ¨æå¤§çš„å‡çº§æˆæœ¬ã€‚è€Œé€šè¿‡ PWC å¼€å‘çš„ç»„ä»¶å°†ä¸å†è¢«è¿™ä¸ªé—®é¢˜å›°æ‰°ï¼ŒPWC æ˜¯åœ¨ Web Component åŸºç¡€ç”¨æ³•ä¸Šæ ¹æ® W3C æ ‡å‡†å’Œ JavaScript è¯­è¨€æ–°ç‰¹æ€§æä¾›æ¸è¿›å¼å¢å¼ºçš„èƒ½åŠ›ï¼Œè¾“å…¥å’Œè¾“å‡ºæ‹¥æœ‰ç»å¯¹çš„ç¡®å®šæ€§
- **ç»„ä»¶èƒ½å¤Ÿè½»æ¾åœ¨å…¶ä»–æ¡†æ¶ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”å…·å¤‡å“åº”å¼èƒ½åŠ›**ã€‚PWC æ‰€å¼€å‘çš„ Web Component å¯ä»¥å°±åƒä½¿ç”¨ `div` è¿™æ ·çš„åŸç”Ÿæ ‡ç­¾ä¸€æ ·åœ¨ React/Vue é¡¹ç›®ä¸­ä½¿ç”¨ï¼ŒåŒæ—¶ç»„ä»¶æ‰€æ¥æ”¶çš„å“åº”å¼å±æ€§ä¹Ÿå¯ä»¥ç›´æ¥è§¦å‘è§†å›¾å˜æ›´ã€‚æ‰€ä»¥ï¼Œä½ å®Œå…¨å¯ä»¥åœ¨ä»»æ„ç°æœ‰çš„ Web App ä¸­ç›´æ¥ä½¿ç”¨ PWCï¼Œå¹¶ä¸”å…·å¤‡è‰¯å¥½çš„æ€§èƒ½ä»¥åŠçŠ¶æ€ç®¡ç†èƒ½åŠ›

## å¦‚ä½•å¼€å‘ä¸€ä¸ª PWC ç»„ä»¶ ï¼ŸğŸ‘¨â€ğŸ’»â€

PWC **æ¨èä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶**çš„å½¢å¼è¿›è¡Œå¼€å‘ï¼Œå¦‚æœä½ ç†Ÿæ‚‰ Vueï¼Œåº”è¯¥å¯¹è¿™ç§å¼€å‘æ¨¡å¼ä¸ä¼šé™Œç”Ÿã€‚æ¯ä¸€ä¸ª PWC ç»„ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„æ–‡ä»¶ä»¥åŠ UI å…ƒç´ ï¼Œä½ ä¹Ÿå¯ä»¥ç»„åˆå¤šä¸ª PWC ç»„ä»¶å˜æˆä¸€ä¸ªåŠŸèƒ½å‹çš„åŒºå—ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª edit-word ç»„ä»¶ç¤ºä¾‹ï¼Œé€šè¿‡è¿™ä¸ªä¾‹å­ä½ å¯ä»¥ä½“éªŒåˆ° PWC çš„ä¸€äº›åŸºç¡€èƒ½åŠ›ä¸ç”¨æ³•ï¼š

> TODO:
> è¿™é‡Œå¾…è¡¥å……ä¸€ä¸ª playground ä»£ç ç‰‡æ®µ

```html
<template>
  <form class="{{#editVisiblityClass}}">
    <input class="editInput" value="{{editValue}}" @input="{{onInput}}" @blur="{{onBlur}}" />
  </form>
  <span @click="{{onClick}}" class="{{#textVisiblityClass}}">{{editValue}}</span>
</template>

<script>
  export default class EditWord extends HTMLElement {
    editValue = 'Cindy';

    #editable = false;

    #editVisiblityClass = 'hide';

    #textVisiblityClass = 'show';

    onClick() {
      this.#editable = true;
      this.#editVisiblityClass = 'show';
      this.#textVisiblityClass = 'hide';
    }

    onInput(event) {
      this.editValue = event.srcElement.value;
    }

    onBlur() {
      this.#editable = false;
      this.#editVisiblityClass = 'hide';
      this.#textVisiblityClass = 'show';
    }
  }
</script>

<style>
  span {
    background-color: #eef;
    padding: 0 2px;
  }
  .editInput {
    width: 50px;
  }
  .show {
    display: inline-block;
  }
  .hide {
    display: none;
  }
</style>
```

ä»ä¸Šé¢çš„ä¾‹å­ï¼Œä½ å¯ä»¥å‘ç° PWC åœ¨ç”¨æ³•ä¸Šæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- PWC æ˜¯[ç›´æ¥æ‰©å±•çš„ `HTMLElement` ç­‰åŸºç¡€ç±»](../base/render)ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ Web Component åŸæœ‰çš„å…¨éƒ¨èƒ½åŠ›
- å¼€å‘è€…åœ¨ `template` æ¨¡æ¿ä¸­ä½¿ç”¨åˆ°çš„ç»„ä»¶å±æ€§ï¼Œé»˜è®¤å°±[å…·å¤‡å“åº”å¼çš„èƒ½åŠ›](../base/reactive)
- å¿«é€Ÿä¾¿æ·çš„[äº‹ä»¶ç»‘å®š](../base/event)æ–¹å¼ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ `@` ä¿®é¥°ç¬¦æ ‡è¯†éœ€è¦ç»‘å®šçš„äº‹ä»¶
- å¼€å‘è€…å¯ä»¥[ç›´æ¥åœ¨ `style` æ ‡ç­¾å†…å†™æ ·å¼](../base/style)ï¼Œå¹¶ä¸”å·¥ç¨‹ä¼šé»˜è®¤å°† style é‡Œæ ·å¼è¿›è¡Œ hashï¼Œé¿å…æ ·å¼æ±¡æŸ“

:::info å•æ–‡ä»¶ç»„ä»¶çš„ä¼˜åŠ¿

- æ›´ç¬¦åˆæ ‡å‡†çš„å¼€å‘ç›´è§‰ï¼Œå³ç»„ä»¶ç”± `template`/`style`/`script` ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼Œå­¦ä¹ æˆæœ¬è¾ƒä½
- å¯ä»¥å¼•å…¥æ›´å¤šç¼–è¯‘æ—¶ä¼˜åŒ–ï¼Œæ ‡å‡†çš„ `template` ç»“æ„å¯ä»¥è®© PWC åœ¨ç¼–è¯‘æ—¶å°±è§£æå‡ºæ¥å®Œæ•´çš„ HTML ç»“æ„ï¼Œä»å¼•å…¥æ›´å¤šæ¶‰åŠåˆ°æ€§èƒ½æ–¹é¢çš„ä¼˜åŒ–
- style å†…çš„æ ·å¼é»˜è®¤å°±å¯ä»¥åšåˆ°åªåœ¨å½“å‰æ–‡ä»¶ç”Ÿæ•ˆï¼Œä¸å­˜åœ¨æ ·å¼æ±¡æŸ“çš„é—®é¢˜
- æ›´å¥½çš„ä»£ç æç¤ºï¼Œæ¨¡æ¿çš„å†™æ³•è®© IDE çš„æç¤ºæ›´åŠ å‹å¥½ï¼ŒåŒæ—¶è¿˜å¯ä»¥è·å¾—é«˜äº®çš„èƒ½åŠ›
:::


### ç›´æ¥é€šè¿‡ `template` å±æ€§è¿›è¡Œæ¸²æŸ“

è™½ç„¶ PWC æ¨èä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶å¼€å‘ã€‚ä½†æ˜¯åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œå¼€å‘è€…ç›´æ¥å¯ä»¥é€šè¿‡ `template` å±æ€§æ¸²æŸ“ç»„ä»¶ï¼Œè€Œä¸éœ€è¦åˆ›å»º `.pwc` æ–‡ä»¶ã€‚

:::caution è¿™ç§æ¸²æŸ“æ–¹å¼çš„ç¼ºç‚¹

- **æ€§èƒ½ä¸‹é™**ï¼Œ`template` è§£æçš„è¿‡ç¨‹ä¼šä»æ„å»ºé˜¶æ®µæŒªåˆ°è¿è¡Œæ—¶é˜¶æ®µï¼Œå½“æ¨¡æ¿ç»“æ„è¶Šå¤æ‚çš„æ—¶å€™ï¼Œå¯¹æ€§èƒ½çš„å½±å“è¶Šå¤§
- **ä»£ç æç¤ºç¼ºå¤±**ï¼Œç”±äº `template` å±æ€§ä¼ å…¥çš„æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥åœ¨ä¹¦å†™ html ç»“æ„çš„æ—¶å€™ï¼Œä»£ç æç¤ºä¸å¤Ÿä¸°å¯Œï¼ŒåŒæ—¶æ²¡æœ‰ä»£ç é«˜äº®
- **æ— æ³•è‡ªåŠ¨è¡¥å…¨ `reactive` è£…é¥°å™¨**ï¼Œçµæ´»çš„ JavaScript è¯­æ³•è®© PWC å®Œå…¨æ— æ³•åšåˆ°ç»™å¼€å‘è€…çš„ä»£ç è¡¥å…… `reactive` è£…é¥°å™¨ç­‰ä¾¿æ·è¯­æ³•ï¼Œå› æ­¤æ‰€æœ‰å“åº”å¼å±æ€§å¼€å‘è€…éƒ½å¿…é¡»è‡ªå·±æ‰‹åŠ¨åŠ ä¸Š `reactive` è£…é¥°å™¨ï¼Œæ¨¡æ¿çš„ç”¨æ³•ä¹Ÿæœ‰æ‰€æ”¹å˜

:::

> TODO:
> è¿™é‡Œå¾…è¡¥å……ä¸€ä¸ª playground ä»£ç ç‰‡æ®µ

```javascript
import { customElement, reactive, html } from 'pwc';

@customElement('edit-word')
export default class EditWord extends HTMLElement {
  @reactive
  accessor editValue = 'Cindy';

  @reactive
  accessor #editable = false;

  @reactive
  accessor #editVisiblityClass = 'hide';

  @reactive
  accessor #textVisiblityClass = 'show';

  onClick() {
    this.#editable = true;
    this.#editVisiblityClass = 'show';
    this.#textVisiblityClass = 'hide';
  }

  onInput(event) {
    this.editValue = event.srcElement.value;
  }

  onBlur() {
    this.#editable = false;
    this.#editVisiblityClass = 'hide';
    this.#textVisiblityClass = 'show';
  }

  get template() {
    return html`<form class="${this.#editVisiblityClass}">
    <input class="editInput" value="${this.editValue}" @input="${this.onInput.bind(this)}" @blur="${this.onBlur.bind(this)}" />
  </form>
  <span @click="${this.onClick.bind(this)}" class="${this.#textVisiblityClass}">${this.editValue}</span>`;
  }
}
```

:::tip ä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨è¿™ç§æ–¹å¼æ¸²æŸ“

- å¸Œæœ›ä½¿ç”¨ JavaScript çµæ´»æ¸²æŸ“ç»„ä»¶
- ä¸å¸Œæœ›å¼ºä¾èµ–å®˜æ–¹çš„æ„å»ºå™¨

:::

## æ€§èƒ½å¯¹æ¯” ğŸš€

> å¾…è¡¥å……æ€§èƒ½å¯¹æ¯”
